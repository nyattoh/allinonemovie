# All-in-One Movie Generator

AI × YAMLで小説・脚本・映像・画像生成を一気通貫で自動化するワークフローシステム

## 特徴

- **YAML駆動**：全設定・プロンプト・テンプレートをYAMLで一元管理
- **AI自動最適化**：Gen-2/Pika/Fast SVD LCM/CogVideoX-5B等に対応
- **ペルソナ並列生成**：10ペルソナによる多様な草案生成と自動スコアリング
- **再帰的推敲**：最大15回の自動書き直し・フィードバック
- **知識ベース連携**：AIプロンプトTipsを自動取得・最適化
- **自然な対話形式**：「小説書いて」の一言から始まる会話形式の生成プロセス
- **柔軟な分岐フロー**：小説→脚本→映像の一気通貫生成に対応

## ディレクトリ構成

```
allinonemovie/
├── main.yaml                 # メイン設定・エントリーポイント
├── includes/                 # テンプレ・知識ベース・エージェント定義
│   ├── ai_prompt_tips/       # AIプロンプトTipsキャッシュ
│   ├── agents_definition.yaml # エージェント・ペルソナ定義
│   ├── complete_ai_content_collection.yaml # AIプロンプト・モデル知識集
│   ├── workflow_checklist.yaml # 各工程のチェックリスト
│   ├── video_prompt_template.yaml # 映像AI用プロンプトテンプレ
│   ├── screenplay_template.yaml # 脚本テンプレ
│   ├── novel_template.yaml   # 小説テンプレ
│   ├── story_content_techniques.yaml # ストーリー技法集
│   ├── image_generation_techniques.yaml # 画像生成技法集
│   ├── t2v_doc.yaml         # Text-to-Video設定
│   ├── i2v_doc.yaml         # Image-to-Video設定
│   ├── examples_reference.yaml # 参考例集
│   ├── detarame_script_template.yaml # 脚本テンプレ
│   ├── dependency_diagram.yaml # 依存関係図
│   ├── workflow_process.yaml # ワークフロープロセス定義
│   ├── reusability_variables.yaml # 再利用可能な変数定義
│   ├── novel_example.yaml    # 小説サンプル
│   ├── movie_prompt_template.yaml # 映画プロンプトテンプレ
│   ├── image2video_prompt_template.yaml # 画像→動画変換テンプレ
│   └── ...（その他テンプレ・技法・チェックリスト等）
└── README.md
```

## ワークフロー

1. **初期ヒアリング**：目的・主人公・舞台設定などを対話形式で取得
2. **草案プロトタイプ生成**：AIが複数案を自動生成
3. **レビュー＆分岐**：レビュー結果で次工程を自動選択
4. **映像化/他工程/既存プロセス**：分岐に応じて各種フローへ
5. **推敲ループ**：自動評価と最大15回の書き直し
6. **知識ベース参照**：AIモデルごとに最新Tipsを自動取得

## 生成プロセス

1. **情報収集フェーズ**
   ```
   ユーザー：「小説書いて」
   システム：「まず、基本的な情報を教えていただけますか？」

   1. ジャンルについて
   システム：「どんなジャンルの作品をお考えですか？
   - ファンタジー
   - ミステリー
   - 恋愛
   - SF
   - その他（具体的にお聞かせください）」

   2. ターゲット読者について
   システム：「想定している読者層はどのくらいの年齢層ですか？
   - 児童（小学生）
   - ヤングアダルト（中高生）
   - 一般（20代以上）
   - その他（具体的にお聞かせください）」

   3. 作品の長さについて
   システム：「どのくらいの長さの作品をお考えですか？
   - ショートストーリー（1-2万字）
   - 中編（3-5万字）
   - 長編（6万字以上）
   - その他（具体的にお聞かせください）」

   4. テーマについて
   システム：「作品のテーマや伝えたいメッセージはありますか？
   - 成長
   - 愛
   - 冒険
   - その他（具体的にお聞かせください）」

   5. 展開について
   システム：「この作品を脚本化や映像化することはお考えですか？
   - 小説のみ
   - 小説→脚本
   - 小説→脚本→映像
   - その他（具体的にお聞かせください）」

   6. キャラクターについて
   システム：「主人公について教えていただけますか？
   - 年齢
   - 性別
   - 性格
   - 特徴
   - 目標や動機」

   7. 世界観について
   システム：「物語の舞台となる世界観について教えていただけますか？
   - 時代設定
   - 場所
   - 特殊な設定やルール
   - その他の特徴」

   8. ストーリー展開について
   システム：「物語の展開について、以下の点を教えていただけますか？
   - 始まりの状況
   - 主要な出来事
   - クライマックス
   - 結末の方向性」

   ユーザー：「ファンタジーで、10代後半から20代前半向けの長編小説を書きたいです。
   テーマは成長と冒険で、脚本化も考えています。
   主人公は16歳の少年で、魔法の力を手に入れる物語です...」
   ```

2. **情報整理と分析フェーズ**
   ```
   システム：「収集した情報を整理し、以下の要素を分析します：
   - ストーリーの核となる要素の抽出
   - キャラクター間の関係性の構築
   - 世界観の一貫性チェック
   - テーマの具体化
   - 展開の方向性の確認」
   ```

3. **草案生成フェーズ**
   ```
   システム：「複数のペルソナ（10種類）で並列的に草案を生成します：
   - ストーリーライター：物語の骨子を構築
   - キャラクターデザイナー：登場人物の詳細を設計
   - 世界観構築者：設定の具体化
   - テーマ分析者：メッセージ性の強化
   - その他専門家：各要素の最適化」
   ```

4. **評価と選択フェーズ**
   ```
   システム：「生成された草案を評価し、上位3つの案を提示します：

   評価基準：
   - ストーリーの一貫性（30点）
   - キャラクターの魅力（20点）
   - 世界観の独自性（15点）
   - テーマの明確さ（15点）
   - 展開の面白さ（10点）
   - ターゲット層への適合性（10点）

   システム：「評価結果、上位3つの案をファイルとして生成します：

   drafts/
   ├── draft1/
   │   ├── story.md        # ストーリー概要
   │   ├── characters.md   # キャラクター設定
   │   ├── world.md        # 世界観設定
   │   └── evaluation.md   # 評価結果（85点）
   ├── draft2/
   │   ├── story.md
   │   ├── characters.md
   │   ├── world.md
   │   └── evaluation.md   # 評価結果（82点）
   └── draft3/
       ├── story.md
       ├── characters.md
       ├── world.md
       └── evaluation.md   # 評価結果（80点）

   システム：「各案の詳細は、drafts/draft[1-3]/ ディレクトリ内のファイルで確認できます。
   これらのファイルは直接編集可能で、お好みの案を選んだ後、内容を自由に修正していただけます。
   修正した内容は、次の推敲フェーズで反映されます。」

   ユーザー：「[案1/2/3]を選びます」
   ```

5. **推敲フェーズ**
   ```
   システム：「選択された草案を基に、以下の工程で推敲を重ねます：
   - 第1回：ストーリーの骨子の確認と修正
   - 第2回：キャラクターの行動と動機の整合性チェック
   - 第3回：世界観の詳細化と矛盾点の修正
   - 第4回：テーマの表現方法の強化
   - 第5回：展開のリズムと面白さの調整
   [以下、最大15回の推敲を実施]」
   ```

6. **分岐処理フェーズ**
   ```
   システム：「推敲が完了したら、次の工程に進みます：

   A. 小説の場合：
   - 小説のみ：ここで完成
   - 小説→脚本：脚本化工程へ
   - 小説→脚本→映像：脚本化工程へ

   B. 脚本の場合：
   - 脚本のみ：ここで完成
   - 脚本→映像：映像化工程へ」
   ```

7. **フィードバックループ**
   ```
   システム：「各工程で以下のフィードバックを実施：
   - ユーザーからの意見収集
   - 専門家による評価
   - 自動評価システムによる分析
   - 市場性の検証
   フィードバックに基づいて必要な修正を実施」
   ```

8. **完成と出力フェーズ**
   ```
   システム：「最終的な作品を以下の形式で出力：
   - 小説：テキストファイル（.txt, .docx）
   - 脚本：脚本形式（.fountain, .fdx）
   - 映像：動画ファイル（.mp4, .mov）
   必要に応じて複数形式での出力が可能」
   ```

## 使い方

### 簡単な使い方（会話形式）

1. **システムの起動**
   ```bash
   # システムを起動し、AIアシスタントと対話を開始
   ```

2. **コンテンツ生成の開始**
   - 「小説書いて」と入力するだけ
   - システムが自然な会話形式で必要な情報を収集
   - 収集した情報に基づいてコンテンツを生成

3. **生成プロセスの流れ**

   A. 小説から始める場合
   ```
   ユーザー：「小説書いて」
   システム：「まず、基本的な情報を教えていただけますか？」

   1. ジャンルについて
   システム：「どんなジャンルの作品をお考えですか？
   - ファンタジー
   - ミステリー
   - 恋愛
   - SF
   - その他（具体的にお聞かせください）」

   2. ターゲット読者について
   システム：「想定している読者層はどのくらいの年齢層ですか？
   - 児童（小学生）
   - ヤングアダルト（中高生）
   - 一般（20代以上）
   - その他（具体的にお聞かせください）」

   3. 作品の長さについて
   システム：「どのくらいの長さの作品をお考えですか？
   - ショートストーリー（1-2万字）
   - 中編（3-5万字）
   - 長編（6万字以上）
   - その他（具体的にお聞かせください）」

   4. テーマについて
   システム：「作品のテーマや伝えたいメッセージはありますか？
   - 成長
   - 愛
   - 冒険
   - その他（具体的にお聞かせください）」

   5. 展開について
   システム：「この作品を脚本化や映像化することはお考えですか？
   - 小説のみ
   - 小説→脚本
   - 小説→脚本→映像
   - その他（具体的にお聞かせください）」

   6. キャラクターについて
   システム：「主人公について教えていただけますか？
   - 年齢
   - 性別
   - 性格
   - 特徴
   - 目標や動機」

   7. 世界観について
   システム：「物語の舞台となる世界観について教えていただけますか？
   - 時代設定
   - 場所
   - 特殊な設定やルール
   - その他の特徴」

   8. ストーリー展開について
   システム：「物語の展開について、以下の点を教えていただけますか？
   - 始まりの状況
   - 主要な出来事
   - クライマックス
   - 結末の方向性」

   ユーザー：「ファンタジーで、10代後半から20代前半向けの長編小説を書きたいです。
   テーマは成長と冒険で、脚本化も考えています。
   主人公は16歳の少年で、魔法の力を手に入れる物語です...」
   ```

   B. 脚本から始める場合
   ```
   ユーザー：「脚本書いて」
   システム：「まず、基本的な情報を教えていただけますか？」

   1. 作品形態について
   システム：「どのような形態の脚本をお考えですか？
   - 映画脚本
   - テレビドラマ脚本
   - アニメ脚本
   - その他（具体的にお聞かせください）」

   2. ジャンルについて
   システム：「どんなジャンルの作品をお考えですか？
   - アクション
   - コメディ
   - ドラマ
   - ファンタジー
   - その他（具体的にお聞かせください）」

   3. ターゲット視聴者について
   システム：「想定している視聴者層はどのくらいの年齢層ですか？
   - ファミリー向け
   - ヤングアダルト向け
   - 一般向け
   - その他（具体的にお聞かせください）」

   4. 作品の長さについて
   システム：「どのくらいの長さの作品をお考えですか？
   - 短編（30分程度）
   - 中編（1-2時間程度）
   - 長編（2時間以上）
   - その他（具体的にお聞かせください）」

   5. テーマについて
   システム：「作品のテーマや伝えたいメッセージはありますか？
   - 成長
   - 愛
   - 冒険
   - その他（具体的にお聞かせください）」

   6. 展開について
   システム：「この脚本を映像化することはお考えですか？
   - 脚本のみ
   - 脚本→映像
   - その他（具体的にお聞かせください）」

   7. キャラクターについて
   システム：「主人公について教えていただけますか？
   - 年齢
   - 性別
   - 性格
   - 特徴
   - 目標や動機」

   8. 世界観について
   システム：「物語の舞台となる世界観について教えていただけますか？
   - 時代設定
   - 場所
   - 特殊な設定やルール
   - その他の特徴」

   9. ストーリー展開について
   システム：「物語の展開について、以下の点を教えていただけますか？
   - 始まりの状況
   - 主要な出来事
   - クライマックス
   - 結末の方向性」

   10. 映像化の詳細について
   システム：「映像化をお考えの場合、以下の点について教えていただけますか？
    - 実写/アニメーション
    - 特殊効果の使用
    - 撮影場所の希望
    - その他の要望」

   ユーザー：「アクション映画の脚本を書きたいです。
    ターゲットは一般向けで、2時間程度の長さです。
    テーマは正義と復讐で、映像化も考えています...」
   ```

4. **分岐フロー**
   - **小説のみ生成**：小説の生成と推敲のみを行う
   - **小説→脚本**：小説生成後、脚本化の工程に進む
   - **小説→脚本→映像**：小説生成、脚本化、映像化を一気通貫で行う
   - **脚本のみ生成**：脚本の生成から開始
   - **映像のみ生成**：既存の脚本や小説から映像化を開始

### 詳細な使い方（YAML設定）

1. **リポジトリのクローン**
   ```bash
   git clone https://github.com/nyattoh/allinonemovie.git
   cd allinonemovie
   ```

2. **main.yamlやincludes/内テンプレを編集**

3. **ワークフロー実行**
   ```bash
   # ワークフローエンジンの実行方法は各環境に応じて異なります
   # 詳細は各環境のドキュメントを参照してください
   ```

## 主要ファイル

- `main.yaml`：全体設定・エントリーポイント
- `includes/agents_definition.yaml`：エージェント・ペルソナ定義
- `includes/complete_ai_content_collection.yaml`：AIプロンプト・モデル知識集
- `includes/workflow_checklist.yaml`：各工程のチェックリスト
- `includes/video_prompt_template.yaml`：映像AI用プロンプトテンプレ
- `includes/screenplay_template.yaml`：脚本テンプレ
- `includes/novel_template.yaml`：小説テンプレ
- `includes/story_content_techniques.yaml`：ストーリー技法集
- `includes/image_generation_techniques.yaml`：画像生成技法集
- `includes/t2v_doc.yaml`：Text-to-Video設定
- `includes/i2v_doc.yaml`：Image-to-Video設定
- `includes/examples_reference.yaml`：参考例集
- `includes/detarame_script_template.yaml`：脚本テンプレ
- `includes/dependency_diagram.yaml`：依存関係図
- `includes/workflow_process.yaml`：ワークフロープロセス定義
- `includes/reusability_variables.yaml`：再利用可能な変数定義
- `includes/novel_example.yaml`：小説サンプル
- `includes/movie_prompt_template.yaml`：映画プロンプトテンプレ
- `includes/image2video_prompt_template.yaml`：画像→動画変換テンプレ

## 注意事項・推奨運用

- すべての設定・テンプレはYAMLで管理
- 各フェーズで最低15回の推敲を推奨
- Detarame要素（意外性）は整合性チェック必須
- AIモデルごとのプロンプト最適化は自動
- 会話形式での生成時は、必要な情報を自然な対話で提供
- 分岐フローは途中で変更可能（例：小説のみの予定が脚本化に変更など）

## ライセンス

MIT License

## 貢献・連絡先

- Issue/Pull Request歓迎
- 質問・提案はGitHub Issueまで 